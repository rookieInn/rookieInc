# 支付宝转账给个人用户接口接入指南

## 概述

支付宝"单笔转账到支付宝账户"接口允许企业账户向个人或企业支付宝账户进行转账。本文档详细介绍如何接入该接口。

## 前置条件

### 1. 企业支付宝账户要求
- 拥有已开通支付宝收款功能的企业支付宝账户
- 企业账户必须完成实名认证
- 已签约"转账到支付宝账户"功能

### 2. 开放平台配置
- 在支付宝开放平台创建应用并获取APPID
- 在应用中添加"单笔转账到支付宝账户"功能
- 确保功能状态为"已生效"
- 配置RSA密钥对（公钥和私钥）

## 接口信息

### 接口地址
```
https://openapi.alipay.com/gateway.do
```

### 接口名称
```
alipay.fund.trans.toaccount.transfer
```

## 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| app_id | String | 是 | 支付宝分配给开发者的应用ID |
| method | String | 是 | 接口名称：alipay.fund.trans.toaccount.transfer |
| charset | String | 是 | 请求使用的编码格式，如utf-8 |
| sign_type | String | 是 | 签名算法类型，支持RSA2 |
| timestamp | String | 是 | 请求时间戳，格式为yyyy-MM-dd HH:mm:ss |
| version | String | 是 | 调用的接口版本，固定为1.0 |
| notify_url | String | 否 | 支付宝服务器主动通知商户服务器里指定的页面http/https路径 |
| biz_content | String | 是 | 业务请求参数的集合，最大长度不限，除公共参数外所有请求参数都必须放在这个参数中传递 |

### biz_content参数说明

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| out_biz_no | String | 是 | 商户转账唯一订单号。发起转账来源方定义的转账单据号，用于将转账回执通知给来源方 |
| payee_type | String | 是 | 收款方账户类型。可取值：ALIPAY_USERID：支付宝账号对应的支付宝唯一用户号；ALIPAY_LOGONID：支付宝登录号 |
| payee_account | String | 是 | 收款方账户。与payee_type配合使用。付款方和收款方不能是同一个账户 |
| amount | String | 是 | 转账金额，单位：元。只支持2位小数，小数点前最大支持13位，金额必须大于等于0.1元 |
| payer_show_name | String | 否 | 付款方姓名（最长支持100个英文/50个汉字）。显示在收款方的账单详情页。如果该字段不传，则默认显示付款方的支付宝认证姓名或单位名称 |
| payee_real_name | String | 否 | 收款方真实姓名（最长支持100个英文/50个汉字）。如果本参数不为空，则会校验该账户在支付宝登记的实名是否与收款方真实姓名一致 |
| remark | String | 否 | 转账备注（支持200个英文/100个汉字）。当付款方为企业账户，且转账金额达到（大于等于）50000元，remark不能为空。收款方可见，会展示在收款用户的收支详情中 |

## 转账限额

- **单笔限额**：
  - 转账给个人支付宝账户：最高5万元
  - 转账给企业支付宝账户：最高10万元
- **日累计限额**：100万元
- **最低金额**：0.1元

## 响应参数

| 参数名 | 类型 | 说明 |
|--------|------|------|
| code | String | 网关返回码，10000表示成功 |
| msg | String | 网关返回码描述 |
| sub_code | String | 业务返回码，参见具体的API接口文档 |
| sub_msg | String | 业务返回码描述，参见具体的API接口文档 |
| sign | String | 签名 |
| out_biz_no | String | 商户转账唯一订单号 |
| order_id | String | 支付宝转账单据号，成功时返回 |
| pay_date | String | 支付时间：格式为yyyy-MM-dd HH:mm:ss，仅转账成功返回 |

## 错误码说明

| 错误码 | 错误信息 | 解决方案 |
|--------|----------|----------|
| ACQ.TRADE_HAS_SUCCESS | 交易已经支付 | 检查订单号是否重复 |
| ACQ.INVALID_PARAMETER | 参数无效 | 检查必填参数是否完整 |
| ACQ.ACCESS_FORBIDDEN | 无权限使用该接口 | 检查应用是否已开通转账功能 |
| ACQ.SYSTEM_ERROR | 系统错误 | 稍后重试 |

## 安全注意事项

1. **签名验证**：所有请求必须使用RSA2算法进行签名
2. **HTTPS传输**：所有接口调用必须使用HTTPS协议
3. **参数校验**：严格校验所有输入参数
4. **订单号唯一性**：确保out_biz_no的唯一性
5. **金额校验**：确保转账金额在限额范围内

## 接入流程

1. **准备阶段**：完成企业认证和功能开通
2. **开发阶段**：集成SDK，实现接口调用
3. **测试阶段**：使用沙箱环境进行测试
4. **上线阶段**：切换到生产环境

## 测试环境

支付宝提供沙箱环境用于开发测试：
- 沙箱网关地址：`https://openapi.alipaydev.com/gateway.do`
- 沙箱账号：使用支付宝提供的测试账号
- 测试金额：建议使用小额测试

## 相关文档

- [支付宝开放平台](https://open.alipay.com/)
- [单笔转账到支付宝账户接口文档](https://docs.open.alipay.com/309)
- [支付宝服务端SDK下载](https://opendocs.alipay.com/open/54/104506)