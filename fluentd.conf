# Fluentd配置文件
<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

# 处理Java应用日志
<filter java.logs>
  @type parser
  key_name message
  reserve_data true
  <parse>
    @type json
  </parse>
</filter>

# 输出到控制台（用于测试）
<match java.logs>
  @type stdout
  <format>
    @type json
  </format>
</match>

# 输出到文件
<match java.logs>
  @type file
  path /var/log/fluentd/java
  append true
  <format>
    @type json
  </format>
  <buffer>
    @type file
    path /var/log/fluentd/buffer
    flush_interval 5s
  </buffer>
</match>

# 输出到Elasticsearch（可选）
# <match java.logs>
#   @type elasticsearch
#   host elasticsearch
#   port 9200
#   index_name java-logs
#   type_name _doc
#   <buffer>
#     @type file
#     path /var/log/fluentd/buffer/elasticsearch
#     flush_interval 5s
#   </buffer>
# </match>